# 使用内联 RISCV 汇编实现查找整数数组最大值

## 题目介绍

本题目要求参与者编写一个C语言函数 `find_max`，该函数使用内联RISC-V汇编来找出一个整数数组中的最大值。然后，编写一个程序调用该函数并输出结果。

本题可参考[第六章 RISC-V架构内联汇编](../chapter-6.md)全部小节内容。

## 题目要求

- 实现一个C语言函数 `find_max`，使用内联RISC-V汇编。
- 函数接受一个整数数组 `arr` 和数组的长度 `n`。
- 找出并返回数组中的最大值。

## 输入

- 一个整数数组 `arr`，以逗号分隔，例如 `10,20,30,40`。
- 一个整数 `n`，表示数组的长度。

## 输出

- 按照格式 `Maximum element in array is result` 输出，其中 `result` 是数组中的最大值。

## 示例

- 如果输入数组是 `10,20,30,40` 且 `n = 4`，则输出应该是 `Maximum element in array is 40`。

## 代码介绍

1. **main.c** 文件包含了主函数和 `find_max` 函数的C包装器。
   - `main` 函数处理命令行参数，解析数组字符串，并调用 `find_max` 函数打印最大值。
   - `find_max` 函数使用内联汇编实现，其中包含了多个PLACEHOLDER，需要用正确的RISC-V汇编指令替换。

2. 内联汇编使用GCC的扩展语法，其中：
   - `"li"` 指令用于将立即数加载到寄存器。
   - `"lw"` 指令用于从内存加载值到寄存器。
   - `"mv"` 指令用于将一个寄存器的值移动到另一个寄存器。
   - `"bge"` 指令用于在比较操作中，当大于或等于时跳转。

## 详细提示信息

- **内联汇编替换**：
  - 使用RISC-V汇编指令替换 `find_max` 函数中的PLACEHOLDER。
  - 将 `max` 初始化为数组的第一个元素值，使用 `"lw"` 指令从数组加载并使用 `"mv"` 移动到 `t1`。
  - 在循环中，使用 `"lw"` 从数组中加载当前元素到 `t2`，使用 `"bge"` 判断并可能更新 `max`。
  - 使用 `"addi"` 更新数组指针 `arr` 和循环计数器 `t0`。

- **数组解析**：
  - 在 `main` 函数中，使用 `strtok` 函数解析逗号分隔的数组字符串。

- **错误处理**：
  - 检查命令行参数的数量和格式。
  - 确保输入的数组元素数量与 `n` 匹配。

- **编译与测试**：
  - 使用 `gcc` 编译器编译程序，并确保RISC-V汇编语法正确。

## 注意事项

- 确保替换的汇编指令逻辑正确，能够正确找出数组的最大值。
- 注意内联汇编的语法和寄存器使用。
- 确保程序能够正确处理命令行参数和数组解析。
- 参与者需要根据题目要求，使用RISC-V汇编语言完成找出数组最大值的计算。通过这个练习，可以加深对RISC-V汇编语言和内联汇编使用的理解，并掌握如何在C语言中嵌入汇编代码来优化性能关键部分。
